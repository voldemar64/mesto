(()=>{"use strict";var e=document.querySelector(".popup_form_fullscreen"),t=document.querySelector(".popup__subtitle"),n=document.querySelector(".popup__image");function o(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");s(t)}}function r(e){e.target.classList.contains("popup")&&s(e.target)}var i=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",o),e.addEventListener("click",r)},s=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",o),e.removeEventListener("click",r)};function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._text=e.name,this._link=e.link,this._templateSelector=t}var r,s;return r=o,(s=[{key:"_setEventListeners",value:function(){var o=this;this._element.querySelector(".card__like-button").addEventListener("click",(function(e){o._handleLikeClick(e)})),this._element.querySelector(".card__delete-button").addEventListener("click",(function(){o._element.remove()})),this._element.querySelector(".card__photo").addEventListener("click",(function(){var r,s;r=o._link,s=o._text,t.textContent=s,n.alt=s,n.src=r,i(e)}))}},{key:"_handleLikeClick",value:function(e){e.target.classList.toggle("card__like-button_liked")}},{key:"generateCard",value:function(){return this._element=document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0),this._setEventListeners(),this._element.querySelector(".card__heading").textContent=this._text,this._element.querySelector(".card__photo").src=this._link,this._element.querySelector(".card__photo").alt=this._text,this._element}}])&&u(r.prototype,s),o}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.setAttribute("disabled","pleasework"),this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.removeAttribute("disabled","pleasework"),this._buttonElement.classList.remove(this._inactiveButtonClass))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){var e=this;this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&l(t.prototype,n),e}(),_=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),d=document.querySelector(".popup__close-button_form_edit"),m=document.querySelector(".popup__close-button_form_add"),h=document.querySelector(".popup__close-button_form_fullscreen"),v=document.querySelector(".popup_form_edit"),f=document.querySelector(".popup_form_add"),y=document.forms.profile_edit,k=document.forms.add_pic,b=document.querySelector(".popup__input_value_name"),S=document.querySelector(".popup__input_value_job"),E=document.querySelector(".popup__input_value_title"),g=document.querySelector(".popup__input_value_link"),C=document.querySelector(".profile__title"),L=document.querySelector(".profile__subtitle"),q=document.querySelector(".cards__list"),w={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_invalid",errorClass:"popup__input-error_active"},x=new c(w,y),B=new c(w,k);x.enableValidation(),B.enableValidation();var I=function(e){q.prepend(e)},j=function(e){return new a(e,".template")};[{name:"Вальгалла",link:"https://images7.alphacoders.com/107/thumb-1920-1077804.jpg"},{name:"Синдикат",link:"https://wallup.net/wp-content/uploads/2017/03/27/272365-Assassins_Creed_Syndicate-Assassins_Creed-Ubisoft.jpg"},{name:"Пираты",link:"https://on-desktop.com/wps/Games_Assassins_creed_4_black_flag_game_2_075157_.jpg"},{name:"Война за независимость",link:"https://i.ytimg.com/vi/e7qeIFC_un4/maxresdefault_live.jpg"},{name:"Эцио Аудиторе",link:"https://gamer-info.com/upload-files/user-reviews/2011/assassins-creed-brotherhood-vatar/assassins-creed-brotherhood-1-big.jpg"},{name:"символ ассасинов",link:"https://www.desktophut.ru/wp-content/uploads/2018/11/vmMDQTcGtsOX0kbegrzJ.jpg"}].forEach((function(e){var t=j(e);I(t.generateCard())})),_.addEventListener("click",(function(){b.value=C.textContent,S.value=L.textContent,x.resetValidation(),i(v)})),d.addEventListener("click",(function(){s(v)})),p.addEventListener("click",(function(){k.reset(),B.resetValidation(),i(f)})),m.addEventListener("click",(function(){s(f)})),h.addEventListener("click",(function(){s(e)})),y.addEventListener("submit",(function(e){e.preventDefault(),C.textContent=b.value,L.textContent=S.value,s(v)})),k.addEventListener("submit",(function(e){e.preventDefault();var t={name:"".concat(E.value),link:"".concat(g.value)},n=j(t);I(n.generateCard()),s(f),k.reset()}))})();